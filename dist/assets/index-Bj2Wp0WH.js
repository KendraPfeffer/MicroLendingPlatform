import{r as a,a as $e,R as Be}from"./vendor-Dt8B4mpO.js";import{B as Ue,C as qe,f as R,p as X,a as We}from"./ethers-4qGHvj7b.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))m(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function g(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function m(c){if(c.ep)return;c.ep=!0;const h=g(c);fetch(c.href,h)}})();var ve={exports:{}},O={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ge=a,Ye=Symbol.for("react.element"),ze=Symbol.for("react.fragment"),Xe=Object.prototype.hasOwnProperty,Ve=Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Je={key:!0,ref:!0,__self:!0,__source:!0};function we(x,u,g){var m,c={},h=null,p=null;g!==void 0&&(h=""+g),u.key!==void 0&&(h=""+u.key),u.ref!==void 0&&(p=u.ref);for(m in u)Xe.call(u,m)&&!Je.hasOwnProperty(m)&&(c[m]=u[m]);if(x&&x.defaultProps)for(m in u=x.defaultProps,u)c[m]===void 0&&(c[m]=u[m]);return{$$typeof:Ye,type:x,key:h,ref:p,props:c,_owner:Ve.current}}O.Fragment=ze;O.jsx=we;O.jsxs=we;ve.exports=O;var e=ve.exports,V={},fe=$e;V.createRoot=fe.createRoot,V.hydrateRoot=fe.hydrateRoot;const k="0x94aB9f99C2450e8395Ee58EA37990bb24eb456FE",_="0xaa36a7",Ke="0x7a69",Qe=["function registerBorrower(uint256 creditScore) external","function requestLoan(uint256 amount, uint256 interestRate, uint256 duration) external returns (uint256)","function fundLoan(uint256 loanId) external payable","function repayLoan(uint256 loanId) external payable","function markDefault(uint256 loanId) external","function getBorrowerLoanCount(address borrower) external view returns (uint256)","function getLenderLoanCount(address lender) external view returns (uint256)","function calculateRepaymentAmount(uint256 loanId) external view returns (uint256)","function loans(uint256) external view returns (address, address, uint256, uint256, uint256, uint256, uint256, uint256, uint8)","function borrowerProfiles(address) external view returns (uint256, uint256, uint256, bool)","function approvedBorrowers(address) external view returns (bool)","function loanCounter() external view returns (uint256)","function owner() external view returns (address)","function MAX_LOAN_AMOUNT() external view returns (uint256)","function MIN_LOAN_AMOUNT() external view returns (uint256)","function MAX_INTEREST_RATE() external view returns (uint256)","function MAX_LOAN_DURATION() external view returns (uint256)","event LoanRequested(uint256 indexed loanId, address indexed borrower, uint256 amount)","event LoanFunded(uint256 indexed loanId, address indexed lender, address indexed borrower)","event LoanRepaid(uint256 indexed loanId, address indexed borrower)","event LoanDefaulted(uint256 indexed loanId, address indexed borrower)","event BorrowerRegistered(address indexed borrower)","event CreditScoreUpdated(address indexed borrower, uint256 newScore)"];function Ze(){const[x,u]=a.useState(""),[g,m]=a.useState(null),[c,h]=a.useState(null),[p,J]=a.useState(null),[$,K]=a.useState(!1),[Q,Z]=a.useState(""),[d,F]=a.useState(!1),[ee,i]=a.useState(null),[te,be]=a.useState(""),[v,se]=a.useState(null),[B,ne]=a.useState(!1),[L,U]=a.useState("0"),[w,re]=a.useState(""),[ye,ae]=a.useState(!1),[f,oe]=a.useState(""),[C,b]=a.useState(""),[S,I]=a.useState(""),[Ne,Le]=a.useState(!0),[P,q]=a.useState(""),[y,ie]=a.useState(""),[M,le]=a.useState(""),[N,ce]=a.useState(""),[Ce,Se]=a.useState(0),[de,ue]=a.useState([]),[he,me]=a.useState([]),[A,Ae]=a.useState({}),D=a.useCallback(()=>typeof window.ethereum<"u"&&window.ethereum.isMetaMask,[]);a.useEffect(()=>{(async()=>{if(D())try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&await xe()}catch{console.log("No previous connection found")}})()},[]),a.useEffect(()=>{if(!D())return;const t=r=>{r.length===0?W():r[0]!==x&&(u(r[0]),G(r[0]))},o=r=>{Z(r),i(r!==_?{status:"error",message:"Please switch to Sepolia testnet to use this DApp"}:null),window.location.reload()},n=()=>{W()};return window.ethereum.on("accountsChanged",t),window.ethereum.on("chainChanged",o),window.ethereum.on("disconnect",n),()=>{var r;(r=window.ethereum)!=null&&r.removeListener&&(window.ethereum.removeListener("accountsChanged",t),window.ethereum.removeListener("chainChanged",o),window.ethereum.removeListener("disconnect",n))}},[x]),a.useEffect(()=>{if(w&&!C){const t=parseInt(w);t>=750?b("5"):t>=650?b("8"):t>=550?b("12"):t>=450?b("15"):b("20")}},[w,C]),a.useEffect(()=>{if(f&&!S){const t=parseFloat(f);t<=.1?I("30"):t<=1?I("90"):I("180")}},[f,S]);const xe=async()=>{if(!D()){i({status:"error",message:"MetaMask is not installed. Please install MetaMask to use this DApp."});return}try{F(!0),i({status:"pending",message:"Connecting to MetaMask..."});const t=await window.ethereum.request({method:"eth_requestAccounts"});if(t.length===0)throw new Error("No accounts returned from MetaMask");const o=await window.ethereum.request({method:"eth_chainId"});Z(o),o!==_&&await pe();const n=new Ue(window.ethereum),r=await n.getSigner();m(n),h(r),u(t[0]),K(!0);const l=new qe(k,Qe,r);J(l);const s=await n.getBalance(t[0]);U(R(s)),await Ee(l),await G(t[0],l),i({status:"success",message:`Connected to Sepolia! ✅ Address: ${t[0].slice(0,6)}...${t[0].slice(-4)}`})}catch(t){console.error("Wallet connection failed:",t),i({status:"error",message:`Connection failed: ${t.message||"Unknown error"}`})}finally{F(!1)}},pe=async()=>{try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:_}]})}catch(t){if(t.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:_,chainName:"Sepolia Test Network",rpcUrls:["https://sepolia.infura.io/v3/"],nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.etherscan.io"]}]})}catch{throw new Error("Failed to add Sepolia network to MetaMask")}else throw t}},W=()=>{u(""),m(null),h(null),J(null),K(!1),ne(!1),se(null),U("0"),i(null),ue([]),me([])},Ee=async t=>{try{const[o,n,r,l]=await Promise.all([t.MAX_LOAN_AMOUNT(),t.MIN_LOAN_AMOUNT(),t.MAX_INTEREST_RATE(),t.MAX_LOAN_DURATION()]);Ae({maxLoanAmount:R(o),minLoanAmount:R(n),maxInterestRate:Number(r),maxDuration:Number(l)/(24*60*60)})}catch(o){console.error("Failed to load contract constants:",o)}},G=async(t,o)=>{const n=o||p;if(n)try{const r=await n.approvedBorrowers(t);if(ne(r),r){const s=await n.borrowerProfiles(t);se({creditScore:0,totalLoans:Number(s[1]),successfulRepayments:Number(s[2]),isActive:s[3]}),await Te(n,t)}await Re(n,t);const l=await n.loanCounter();Se(Number(l))}catch(r){console.error("Failed to load user data:",r),i({status:"error",message:`Failed to load user data: ${r.message||"Unknown error"}`})}},Te=async(t,o)=>{try{const n=await t.loanCounter(),r=[];for(let l=1;l<=Number(n);l++)try{const s=await t.getLoanBasicInfo(l);(s[0].toLowerCase()===o.toLowerCase()||s[1].toLowerCase()===o.toLowerCase())&&r.push({id:l,borrower:s[0],lender:s[1],duration:Number(s[2]),createdAt:Number(s[3]),fundedAt:Number(s[4]),dueDate:Number(s[5]),status:Number(s[6]),isPrivate:s[7]})}catch(s){console.error(`Failed to load loan ${l}:`,s)}ue(r)}catch(n){console.error("Failed to load user loans:",n)}},Re=async(t,o)=>{try{const n=await t.loanCounter(),r=[];for(let l=1;l<=Number(n);l++)try{const s=await t.getLoanBasicInfo(l);s[6]===0&&!s[7]&&s[0].toLowerCase()!==o.toLowerCase()&&r.push({id:l,borrower:s[0],lender:s[1],duration:Number(s[2]),createdAt:Number(s[3]),fundedAt:Number(s[4]),dueDate:Number(s[5]),status:Number(s[6]),isPrivate:s[7]})}catch(s){console.error(`Failed to load loan ${l}:`,s)}me(r)}catch(n){console.error("Failed to load available loans:",n)}},ke=async(t,...o)=>{try{const n=await t.estimateGas(...o),r=await(g==null?void 0:g.getFeeData());if(r!=null&&r.gasPrice){const l=n*r.gasPrice;return be(R(l)),{gasEstimate:n,gasPrice:r.gasPrice}}}catch(n){console.error("Gas estimation failed:",n)}return null},H=async(t,o,n=0n,r="Transaction completed successfully")=>{var l;if(!p||!c)return i({status:"error",message:"Wallet not connected"}),null;try{F(!0),i({status:"pending",message:"Estimating gas fees..."}),await ke(t,...o,n>0?{value:n}:{}),i({status:"pending",message:"Preparing transaction... Please confirm in MetaMask"});const s={};n>0&&(s.value=n);const j=await t(...o,s);i({status:"pending",message:`Transaction sent! Hash: ${j.hash}. Waiting for confirmation...`,hash:j.hash});const z=await j.wait(),He=z.gasUsed.toString(),je=((l=z.gasPrice)==null?void 0:l.toString())||"0";if(i({status:"success",message:r,hash:j.hash,gasUsed:R(BigInt(He)*BigInt(je)),gasPrice:We(je,"gwei")}),await G(x),g){const Oe=await g.getBalance(x);U(R(Oe))}return z}catch(s){console.error("Transaction failed:",s);let j="Transaction failed";return s.code===4001?j="Transaction cancelled by user":s.code===-32603?j="Internal error - please try again":s.reason?j=`Contract error: ${s.reason}`:s.message&&(j=s.message),i({status:s.code===4001?"cancelled":"error",message:j}),null}finally{F(!1)}},Ie=async()=>{if(!w){i({status:"error",message:"Please select a credit score range"});return}const t=parseInt(w);if(t<300||t>850){i({status:"error",message:"Credit score must be between 300-850"});return}await H(p.registerBorrower,[t],0n,`Successfully registered as borrower with credit score ${t}! 🎉`),re(""),ae(!1)},Pe=async()=>{if(!f||!C||!S){i({status:"error",message:"Please fill in all loan request fields"});return}const t=parseFloat(f),o=parseInt(C),n=parseInt(S);if(A.minLoanAmount&&t<parseFloat(A.minLoanAmount)){i({status:"error",message:`Loan amount must be at least ${A.minLoanAmount} ETH`});return}if(A.maxLoanAmount&&t>parseFloat(A.maxLoanAmount)){i({status:"error",message:`Loan amount cannot exceed ${A.maxLoanAmount} ETH`});return}await H(p.requestLoan,[X(f),o*100,n*24*60*60],0n,`Loan request submitted successfully! Amount: ${f} ETH, Rate: ${o}% 💰`),oe(""),b(""),I("")},Me=async()=>{if(!P||!y){i({status:"error",message:"Please enter loan ID and funding amount"});return}const t=parseFloat(y);if(t<=0){i({status:"error",message:"Funding amount must be greater than 0"});return}if(parseFloat(L)<t){i({status:"error",message:"Insufficient balance to fund this loan"});return}await H(p.fundLoan,[parseInt(P)],X(y),`Loan #${P} funded successfully with ${y} ETH! 🤝`),q(""),ie("")},De=async()=>{if(!M||!N){i({status:"error",message:"Please enter loan ID and repayment amount"});return}const t=parseFloat(N);if(t<=0){i({status:"error",message:"Repayment amount must be greater than 0"});return}if(parseFloat(L)<t){i({status:"error",message:"Insufficient balance to repay this loan"});return}await H(p.repayLoan,[parseInt(M)],X(N),`Loan #${M} repaid successfully! Amount: ${N} ETH ✅`),le(""),ce("")},_e=t=>{q(t.toString()),i({status:"pending",message:`Loan ID ${t} selected. Enter funding amount and confirm to fund this loan.`})},Fe=t=>{const o={pending:"info",success:"success",error:"error",cancelled:"warning"}[t.status];return e.jsxs("div",{className:`message ${o}`,children:[e.jsx("p",{children:t.message}),t.hash&&e.jsx("p",{children:e.jsx("small",{children:e.jsx("a",{href:`https://sepolia.etherscan.io/tx/${t.hash}`,target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline"},children:"View on Etherscan →"})})}),t.gasUsed&&e.jsx("p",{children:e.jsxs("small",{children:["Gas Used: ",t.gasUsed," ETH (",t.gasPrice," Gwei)"]})})]})},ge=t=>{switch(t){case 0:return"Requested";case 1:return"Funded";case 2:return"Repaid";case 3:return"Defaulted";default:return"Unknown"}},Y=t=>t>0?new Date(t*1e3).toLocaleDateString():"N/A",E=Q===_,T=Q===Ke;return e.jsx("div",{className:"app",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"app-header",children:[e.jsx("div",{className:"logo",children:"🔒"}),e.jsx("h1",{className:"title",children:"隐私小额贷款"}),e.jsx("p",{className:"subtitle",children:"基于区块链技术的机密P2P借贷平台 - 保护您的隐私，安全便捷借贷"})]}),e.jsxs("div",{className:"blockchain-info",children:[e.jsx("p",{children:e.jsx("strong",{children:"🔐 真实区块链应用"})}),e.jsx("p",{children:"运行在本地测试网络 - 需要MetaMask钱包连接"}),$&&e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"网络:"})," ",T?"✅ 本地测试网":"❌ 网络错误"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"余额:"})," ",L," ETH"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"合约:"})," ",k.slice(0,8),"...",k.slice(-6)]})]})]}),e.jsxs("div",{className:"intro-text",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Real Blockchain Experience"})," – This is a live DApp on Sepolia testnet."]}),e.jsx("p",{children:"• All transactions require MetaMask confirmation and gas fees"}),e.jsx("p",{children:"• Your wallet needs Sepolia ETH to interact with the contract"}),e.jsx("p",{children:"• Every action is recorded permanently on the blockchain"}),e.jsx("p",{children:"• Credit scores and loan data are encrypted using FHE technology"})]}),!D()&&e.jsxs("div",{className:"message error",children:[e.jsx("p",{children:"MetaMask is required to use this DApp."}),e.jsx("p",{children:e.jsx("a",{href:"https://metamask.io/download/",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline"},children:"Install MetaMask →"})})]}),!E&&$&&e.jsxs("div",{className:"message error",children:[e.jsx("p",{children:"Please switch to Sepolia testnet to use this DApp."}),e.jsx("button",{className:"button",onClick:pe,disabled:d,children:"Switch to Sepolia"})]}),ee&&Fe(ee),te&&e.jsx("div",{className:"message info",children:e.jsxs("p",{children:["Estimated gas cost: ",te," ETH"]})}),$?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Your Wallet"}),e.jsxs("div",{className:"profile-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",x.slice(0,8),"...",x.slice(-6)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Balance:"})," ",L," ETH"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Network:"})," ",E?"Sepolia Testnet ✅":"Wrong Network ❌"]}),v?e.jsxs("div",{className:"profile-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:v.totalLoans}),e.jsx("div",{className:"stat-label",children:"Total Loans"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:v.successfulRepayments}),e.jsx("div",{className:"stat-label",children:"Successful Repayments"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsxs("div",{className:"stat-value",children:[v.totalLoans>0?Math.round(v.successfulRepayments/v.totalLoans*100):0,"%"]}),e.jsx("div",{className:"stat-label",children:"Success Rate"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:v.isActive?"✅":"❌"}),e.jsx("div",{className:"stat-label",children:"Account Status"})]})]}):e.jsx("div",{className:"message info",children:e.jsx("p",{children:"You are not registered as a borrower yet. Register below to start borrowing."})}),e.jsx("div",{className:"button-group",children:e.jsx("button",{className:"button warning",onClick:W,style:{fontSize:"0.8rem",padding:"8px 16px"},children:"Disconnect"})})]})]}),!B&&E&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Register as Borrower"}),e.jsx("p",{children:"Register your encrypted credit score on the blockchain to start borrowing."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Credit Score (300-850):"}),e.jsxs("select",{value:w,onChange:t=>re(t.target.value),disabled:d,children:[e.jsx("option",{value:"",children:"Select Credit Score Range"}),e.jsx("option",{value:"350",children:"Poor (300-350)"}),e.jsx("option",{value:"400",children:"Poor (350-400)"}),e.jsx("option",{value:"500",children:"Fair (450-500)"}),e.jsx("option",{value:"550",children:"Fair (500-550)"}),e.jsx("option",{value:"650",children:"Good (600-650)"}),e.jsx("option",{value:"700",children:"Good (650-700)"}),e.jsx("option",{value:"750",children:"Excellent (700-750)"}),e.jsx("option",{value:"800",children:"Excellent (750-800)"}),e.jsx("option",{value:"850",children:"Perfect (800-850)"})]})]}),e.jsxs("div",{className:"checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"makePublic",checked:ye,onChange:t=>ae(t.target.checked),disabled:d}),e.jsx("label",{htmlFor:"makePublic",children:"Make my profile public (visible to all lenders)"})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{className:"button secondary",onClick:Ie,disabled:d||!w||!T,children:d?"Registering...":"Register as Borrower"})})]}),B&&E&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Request Loan"}),e.jsx("p",{children:"Submit a loan request with encrypted terms to the blockchain."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Loan Amount:"}),e.jsxs("select",{value:f,onChange:t=>oe(t.target.value),disabled:d,children:[e.jsx("option",{value:"",children:"Select Loan Amount"}),e.jsx("option",{value:"0.01",children:"0.01 ETH (~$20)"}),e.jsx("option",{value:"0.05",children:"0.05 ETH (~$100)"}),e.jsx("option",{value:"0.1",children:"0.1 ETH (~$200)"}),e.jsx("option",{value:"0.5",children:"0.5 ETH (~$1,000)"}),e.jsx("option",{value:"1",children:"1 ETH (~$2,000)"}),e.jsx("option",{value:"2",children:"2 ETH (~$4,000)"}),e.jsx("option",{value:"5",children:"5 ETH (~$10,000)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Interest Rate (APR):"}),e.jsxs("select",{value:C,onChange:t=>b(t.target.value),disabled:d,children:[e.jsx("option",{value:"",children:"Select Interest Rate"}),e.jsx("option",{value:"5",children:"5% APR (Low Risk)"}),e.jsx("option",{value:"8",children:"8% APR (Medium Risk)"}),e.jsx("option",{value:"12",children:"12% APR (Higher Risk)"}),e.jsx("option",{value:"15",children:"15% APR (High Risk)"}),e.jsx("option",{value:"20",children:"20% APR (Very High Risk)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Loan Duration:"}),e.jsxs("select",{value:S,onChange:t=>I(t.target.value),disabled:d,children:[e.jsx("option",{value:"",children:"Select Duration"}),e.jsx("option",{value:"7",children:"1 Week"}),e.jsx("option",{value:"14",children:"2 Weeks"}),e.jsx("option",{value:"30",children:"1 Month"}),e.jsx("option",{value:"60",children:"2 Months"}),e.jsx("option",{value:"90",children:"3 Months"}),e.jsx("option",{value:"180",children:"6 Months"}),e.jsx("option",{value:"365",children:"1 Year"})]})]}),e.jsxs("div",{className:"checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"isPrivateLoan",checked:Ne,onChange:t=>Le(t.target.checked),disabled:d}),e.jsx("label",{htmlFor:"isPrivateLoan",children:"Private loan (requires permission to view)"})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{className:"button",onClick:Pe,disabled:d||!f||!C||!S||!T,children:d?"Requesting...":"Request Loan"})})]}),E&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Fund a Loan"}),e.jsx("p",{children:"Provide funding to borrowers and earn interest on the blockchain."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Loan ID:"}),e.jsx("input",{type:"number",value:P,onChange:t=>q(t.target.value),placeholder:"Enter loan ID to fund",min:"1",disabled:d})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Funding Amount:"}),e.jsxs("select",{value:y,onChange:t=>ie(t.target.value),disabled:d,children:[e.jsx("option",{value:"",children:"Select Amount"}),e.jsx("option",{value:"0.01",children:"0.01 ETH"}),e.jsx("option",{value:"0.05",children:"0.05 ETH"}),e.jsx("option",{value:"0.1",children:"0.1 ETH"}),e.jsx("option",{value:"0.5",children:"0.5 ETH"}),e.jsx("option",{value:"1",children:"1 ETH"}),e.jsx("option",{value:"2",children:"2 ETH"}),e.jsx("option",{value:"5",children:"5 ETH"})]})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{className:"button accent",onClick:Me,disabled:d||!P||!y||!T||parseFloat(L)<parseFloat(y||"0"),children:d?"Funding...":"Fund Loan"})})]}),B&&E&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Repay Loan"}),e.jsx("p",{children:"Repay your loan with interest to maintain good credit standing."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Loan ID:"}),e.jsx("input",{type:"number",value:M,onChange:t=>le(t.target.value),placeholder:"Enter loan ID to repay",min:"1",disabled:d})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Repayment Amount:"}),e.jsxs("select",{value:N,onChange:t=>ce(t.target.value),disabled:d,children:[e.jsx("option",{value:"",children:"Select Amount"}),e.jsx("option",{value:"0.011",children:"0.011 ETH (0.01 + 10% interest)"}),e.jsx("option",{value:"0.0525",children:"0.0525 ETH (0.05 + 5% interest)"}),e.jsx("option",{value:"0.108",children:"0.108 ETH (0.1 + 8% interest)"}),e.jsx("option",{value:"0.56",children:"0.56 ETH (0.5 + 12% interest)"}),e.jsx("option",{value:"1.15",children:"1.15 ETH (1 + 15% interest)"}),e.jsx("option",{value:"2.4",children:"2.4 ETH (2 + 20% interest)"}),e.jsx("option",{value:"5.6",children:"5.6 ETH (5 + 12% interest)"})]})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{className:"button warning",onClick:De,disabled:d||!M||!N||!T||parseFloat(L)<parseFloat(N||"0"),children:d?"Repaying...":"Repay Loan"})})]}),de.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Your Loans"}),e.jsx("div",{className:"loans-list",children:de.map(t=>e.jsxs("div",{className:"loan-item",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("strong",{children:["Loan #",t.id]}),e.jsx("span",{className:`loan-status ${ge(t.status).toLowerCase()}`,children:ge(t.status)})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",t.borrower.toLowerCase()===x.toLowerCase()?"Borrower":"Lender"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",Math.round(t.duration/86400)," days"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",Y(t.createdAt)]}),t.dueDate>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Due:"})," ",Y(t.dueDate)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Privacy:"})," ",t.isPrivate?"Private":"Public"]}),e.jsx("p",{children:e.jsx("a",{href:`https://sepolia.etherscan.io/address/${k}`,target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline",fontSize:"0.9rem"},children:"View on Etherscan →"})})]},t.id))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Available Loans to Fund"}),e.jsx("div",{className:"loans-list",children:he.length===0?e.jsx("p",{children:"No public loans available for funding at the moment."}):he.map(t=>e.jsxs("div",{className:"loan-item",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("strong",{children:["Loan #",t.id]}),e.jsx("button",{className:"button accent",onClick:()=>_e(t.id),style:{padding:"5px 10px",fontSize:"0.8rem"},disabled:d||!T,children:"Quick Fund"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Borrower:"})," ",t.borrower.slice(0,8),"...",t.borrower.slice(-6)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",Math.round(t.duration/86400)," days"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",Y(t.createdAt)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," Available for funding"]})]},t.id))})]})]}):e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Connect Your Wallet"}),e.jsx("p",{children:"Connect MetaMask to interact with the Privacy Micro-Lending smart contract on Sepolia testnet."}),e.jsx("div",{className:"button-group",children:e.jsx("button",{className:"button",onClick:xe,disabled:d||!D(),children:d?"Connecting...":"Connect MetaMask"})}),e.jsxs("p",{style:{marginTop:"15px",fontSize:"0.9rem",opacity:.8},children:["Need Sepolia ETH? Get it from the"," ",e.jsx("a",{href:"https://sepoliafaucet.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline"},children:"Sepolia Faucet"})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"40px",backgroundColor:"rgba(255, 255, 255, 0.05)"},children:[e.jsx("h3",{children:"🚀 Real Blockchain Features"}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Live Smart Contract:"})," Deployed on Sepolia testnet"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"MetaMask Integration:"})," Real wallet connection & transaction signing"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Gas Fee Payment:"})," Actual ETH required for transactions"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Transaction Confirmation:"})," Blockchain verification required"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Permanent Records:"})," All data stored on Ethereum"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"FHE Privacy:"})," Credit scores & loan data encrypted"]})]}),e.jsxs("div",{style:{marginTop:"15px",textAlign:"center"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Contract Address:"})," ",e.jsx("a",{href:`https://sepolia.etherscan.io/address/${k}`,target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline"},children:k})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Loans Created:"})," ",Ce]})]})]})]})})}V.createRoot(document.getElementById("root")).render(e.jsx(Be.StrictMode,{children:e.jsx(Ze,{})}));
